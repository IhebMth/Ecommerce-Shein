/* ============================================================
   NOVA Fashion Store — styles.css
   Includes full dark mode via [data-theme="dark"]
============================================================ */

/* ── LIGHT THEME (default) ── */
:root {
  --black: #0a0a0a;
  --white: #fafaf8;
  --cream: #f4f1eb;
  --accent: #c9a96e;
  --accent-dark: #a8844d;
  --accent-glow: rgba(201, 169, 110, 0.18);
  --gray: #888;
  --light-gray: #e8e5df;
  --red: #c0392b;
  --green: #27ae60;

  /* Semantic tokens */
  --bg:           #fafaf8;
  --bg-secondary: #f4f1eb;
  --bg-card:      #ffffff;
  --bg-panel:     #ffffff;
  --bg-hero-start:#1a1a1a;
  --bg-hero-end:  #2d2417;
  --surface:      #ffffff;
  --surface-alt:  #f4f1eb;
  --border:       #e8e5df;
  --border-strong:#c8c4bd;
  --text-primary: #0a0a0a;
  --text-secondary:#555;
  --text-muted:   #888;
  --text-inverse: #fafaf8;
  --header-bg:    rgba(250, 250, 248, 0.95);
  --shadow-sm:    0 2px 8px rgba(0,0,0,0.06);
  --shadow-md:    0 4px 20px rgba(0,0,0,0.10);
  --shadow-lg:    0 8px 40px rgba(0,0,0,0.14);
  --shadow-panel: -4px 0 30px rgba(0,0,0,0.10);
  --modal-overlay:rgba(0,0,0,0.55);
}

/* ── DARK THEME ── */
[data-theme="dark"] {
  --black: #f0ede8;
  --white: #0f0f0d;
  --cream: #1a1915;
  --accent: #d4b483;
  --accent-dark: #c9a96e;
  --accent-glow: rgba(212, 180, 131, 0.15);
  --gray: #6b6b6b;
  --light-gray: #2a2925;
  --red: #e05252;
  --green: #3dbe74;

  /* Semantic tokens */
  --bg:           #0f0f0d;
  --bg-secondary: #1a1915;
  --bg-card:      #161613;
  --bg-panel:     #131311;
  --bg-hero-start:#070706;
  --bg-hero-end:  #1a1408;
  --surface:      #1c1c19;
  --surface-alt:  #242420;
  --border:       #2a2925;
  --border-strong:#3a3930;
  --text-primary: #f0ede8;
  --text-secondary:#b0aca5;
  --text-muted:   #6b6b6b;
  --text-inverse: #0f0f0d;
  --header-bg:    rgba(15, 15, 13, 0.96);
  --shadow-sm:    0 2px 8px rgba(0,0,0,0.3);
  --shadow-md:    0 4px 20px rgba(0,0,0,0.45);
  --shadow-lg:    0 8px 40px rgba(0,0,0,0.6);
  --shadow-panel: -4px 0 40px rgba(0,0,0,0.5);
  --modal-overlay:rgba(0,0,0,0.75);
}

/* ── TRANSITION FOR THEME SWITCH ── */
*, *::before, *::after {
  transition:
    background-color 0.35s ease,
    border-color 0.35s ease,
    color 0.25s ease,
    box-shadow 0.35s ease;
  margin: 0; padding: 0; box-sizing: border-box;
}
/* But NOT layout/transform transitions — causes lag */
img, svg, .product-card, .modal, .cart-panel, .wish-panel,
.color-swatch, .size-btn, .cat-pill, .wish-btn, .card-color-dot {
  transition:
    background-color 0.35s ease,
    border-color 0.35s ease,
    color 0.25s ease,
    box-shadow 0.35s ease,
    transform 0.2s ease,
    opacity 0.2s ease;
}

body {
  font-family: 'DM Sans', sans-serif;
  background: var(--bg);
  color: var(--text-primary);
  min-height: 100vh;
}
body[dir="rtl"] { font-family: 'Noto Kufi Arabic', sans-serif; }
body[dir="rtl"] .logo { font-family: 'Cormorant Garamond', serif; }
a { text-decoration: none; color: inherit; }
img { max-width: 100%; display: block; }
button { cursor: pointer; border: none; background: none; font-family: inherit; }

/* ── HEADER ── */
header {
  position: sticky; top: 0; z-index: 100;
  background: var(--header-bg);
  border-bottom: 1px solid var(--border);
  padding: 0 2rem;
  display: flex; align-items: center; justify-content: space-between;
  height: 64px;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}
.logo {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.8rem; font-weight: 600;
  letter-spacing: 0.15em; color: var(--text-primary);
}
.logo span { color: var(--accent); }
nav { display: flex; gap: 2rem; align-items: center; }
nav button {
  font-size: 0.8rem; letter-spacing: 0.1em; text-transform: uppercase;
  color: var(--text-muted); font-weight: 500;
  padding: 0.3rem 0;
  border-bottom: 2px solid transparent;
  transition: color 0.2s, border-color 0.2s;
}
body[dir="rtl"] nav button { letter-spacing: 0; }
nav button:hover, nav button.active { color: var(--text-primary); border-color: var(--accent); }
.header-right { display: flex; gap: 0.75rem; align-items: center; }
.lang-toggle {
  display: flex; border: 1px solid var(--border);
  border-radius: 2rem; overflow: hidden;
  font-size: 0.72rem; font-weight: 600; letter-spacing: 0.06em;
}
.lang-btn { padding: 0.35rem 0.8rem; color: var(--text-muted); transition: all 0.2s; text-transform: uppercase; }
.lang-btn.active { background: var(--text-primary); color: var(--bg); }
.lang-btn:hover:not(.active) { background: var(--surface-alt); }
.cart-btn { position: relative; padding: 0.5rem; font-size: 1.3rem; transition: transform 0.2s; }
.cart-btn:hover { transform: scale(1.1); }
.cart-count {
  position: absolute; top: 0; right: 0;
  background: var(--accent); color: white;
  font-size: 0.65rem; font-weight: 700;
  width: 18px; height: 18px; border-radius: 50%;
  display: none; align-items: center; justify-content: center;
}

/* ── THEME TOGGLE BUTTON ── */
.theme-toggle-btn {
  position: relative;
  width: 40px; height: 40px;
  border-radius: 50%;
  border: 1px solid var(--border);
  background: var(--surface);
  display: flex; align-items: center; justify-content: center;
  transition: border-color 0.2s, background 0.2s, transform 0.2s, box-shadow 0.2s;
  overflow: hidden;
}
.theme-toggle-btn:hover {
  border-color: var(--accent);
  background: var(--accent-glow);
  transform: rotate(20deg) scale(1.08);
  box-shadow: 0 0 0 3px var(--accent-glow);
}
.theme-toggle-btn svg {
  width: 18px; height: 18px;
  fill: none; stroke: var(--text-primary);
  stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
  position: absolute;
  /* Never use display:none — CSS handles visibility entirely */
  display: block !important;
  pointer-events: none;
  transition: opacity 0.3s ease, transform 0.4s ease;
}
/* Light mode: show moon, hide sun */
.icon-moon { opacity: 1; transform: rotate(0deg) scale(1); }
.icon-sun  { opacity: 0; transform: rotate(90deg) scale(0.5); }

/* Dark mode: show sun, hide moon */
[data-theme="dark"] .icon-moon { opacity: 0; transform: rotate(-90deg) scale(0.5); }
[data-theme="dark"] .icon-sun  { opacity: 1; transform: rotate(0deg) scale(1); }

/* Pop animation on click */
@keyframes themePop {
  0%   { transform: scale(1); }
  40%  { transform: scale(0.82) rotate(30deg); }
  70%  { transform: scale(1.18) rotate(-10deg); }
  100% { transform: scale(1) rotate(0deg); }
}
.theme-toggle-btn.theme-pop { animation: themePop 0.4s cubic-bezier(0.34,1.56,0.64,1); }

/* ── HERO ── */
#hero {
  background: linear-gradient(135deg, var(--bg-hero-start) 0%, var(--bg-hero-end) 100%);
  color: white; padding: 5rem 2rem; text-align: center;
  position: relative; overflow: hidden;
}
#hero::before {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(ellipse at 30% 50%, rgba(201,169,110,0.15) 0%, transparent 60%);
}
[data-theme="dark"] #hero::before {
  background: radial-gradient(ellipse at 30% 50%, rgba(212,180,131,0.12) 0%, transparent 60%);
}
#hero::after {
  content: ''; position: absolute; inset: 0; pointer-events: none;
  background: radial-gradient(ellipse at 70% 80%, rgba(201,169,110,0.07) 0%, transparent 50%);
}
#hero h1 {
  font-family: 'Cormorant Garamond', serif;
  font-size: clamp(2.5rem, 6vw, 5rem);
  font-weight: 300; letter-spacing: 0.05em;
  line-height: 1.1; position: relative; z-index: 1;
}
body[dir="rtl"] #hero h1 { font-family: 'Noto Kufi Arabic', sans-serif; letter-spacing: 0; font-weight: 300; }
#hero h1 em { font-style: italic; color: var(--accent); }
body[dir="rtl"] #hero h1 em { font-style: normal; }
#hero p { margin-top: 1rem; color: #aaa; font-size: 1rem; letter-spacing: 0.05em; position: relative; z-index: 1; }
body[dir="rtl"] #hero p { letter-spacing: 0; }
.hero-btns { margin-top: 2rem; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; position: relative; z-index: 1; }
.btn-primary {
  background: var(--accent); color: white;
  padding: 0.8rem 2.2rem;
  font-size: 0.8rem; letter-spacing: 0.12em; text-transform: uppercase; font-weight: 500;
  transition: background 0.2s, transform 0.2s; font-family: inherit;
}
body[dir="rtl"] .btn-primary { letter-spacing: 0; }
.btn-primary:hover { background: var(--accent-dark); transform: translateY(-1px); }
.btn-outline {
  border: 1px solid rgba(255,255,255,0.4); color: white;
  padding: 0.8rem 2.2rem;
  font-size: 0.8rem; letter-spacing: 0.12em; text-transform: uppercase; font-weight: 500;
  transition: border-color 0.2s, background 0.2s; font-family: inherit;
}
body[dir="rtl"] .btn-outline { letter-spacing: 0; }
.btn-outline:hover { border-color: var(--accent); background: rgba(201,169,110,0.1); }

/* ── SHOP ── */
#shop { padding: 3rem 2rem; max-width: 1400px; margin: 0 auto; }
.section-title { font-family: 'Cormorant Garamond', serif; font-size: 2rem; font-weight: 400; margin-bottom: 0.25rem; color: var(--text-primary); }
body[dir="rtl"] .section-title { font-family: 'Noto Kufi Arabic', sans-serif; }
.section-sub { color: var(--text-muted); font-size: 0.85rem; margin-bottom: 2rem; }
.categories { display: flex; gap: 0.6rem; flex-wrap: wrap; margin-bottom: 2.5rem; }
.cat-pill {
  padding: 0.45rem 1.2rem;
  border: 1px solid var(--border);
  font-size: 0.78rem; letter-spacing: 0.08em; text-transform: uppercase;
  color: var(--text-muted); border-radius: 2rem;
  transition: all 0.2s; font-family: inherit;
  background: var(--surface);
}
body[dir="rtl"] .cat-pill { letter-spacing: 0; }
.cat-pill:hover, .cat-pill.active {
  background: var(--text-primary); color: var(--bg); border-color: var(--text-primary);
}
.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 2rem;
}
.product-card { cursor: pointer; transition: transform 0.2s; }
.product-card:hover { transform: translateY(-4px); }
/* Hover image swap + quick-add — styles at bottom of file */
.card-img {
  aspect-ratio: 3/4; overflow: hidden;
  background: var(--bg-secondary); position: relative;
  border: 1px solid var(--border);
}
/* card-img-primary / secondary defined in responsive section */
.badge {
  position: absolute; top: 0.75rem; left: 0.75rem;
  background: var(--accent); color: white;
  font-size: 0.68rem; font-weight: 700; letter-spacing: 0.06em; text-transform: uppercase;
  padding: 0.25rem 0.6rem;
}
body[dir="rtl"] .badge { left: auto; right: 0.75rem; letter-spacing: 0; }
.badge.sold-out { background: var(--text-primary); color: var(--bg); }
.badge.low { background: var(--red); }
.card-colors { display: flex; gap: 0.35rem; padding: 0.6rem 0 0; }
.card-color-dot {
  width: 14px; height: 14px; border-radius: 50%;
  border: 1.5px solid rgba(0,0,0,0.15);
  transition: transform 0.15s; cursor: pointer;
}
[data-theme="dark"] .card-color-dot { border-color: rgba(255,255,255,0.15); }
.card-color-dot:hover { transform: scale(1.3); }
.card-color-dot.active { border-color: var(--text-primary); box-shadow: 0 0 0 2px var(--text-primary); }
.card-info { padding: 0.8rem 0 0; }
.card-cat { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); }
body[dir="rtl"] .card-cat { letter-spacing: 0; }
.card-name { font-size: 1rem; margin: 0.2rem 0; font-weight: 400; color: var(--text-primary); }
.card-price { display: flex; gap: 0.6rem; align-items: center; }
.price-now { font-weight: 500; color: var(--text-primary); }
.price-old { text-decoration: line-through; color: var(--text-muted); font-size: 0.85rem; }
.discount { color: var(--accent); font-size: 0.78rem; font-weight: 600; }

/* ── SEARCH + SORT BAR ── */
.shop-controls {
  display: flex; gap: 0.8rem; align-items: center;
  flex-wrap: wrap; margin-bottom: 2rem;
}
.search-wrap { flex: 1; min-width: 200px; position: relative; }
.search-wrap svg {
  position: absolute; left: 0.9rem; top: 50%; transform: translateY(-50%);
  width: 16px; height: 16px; stroke: var(--text-muted); fill: none;
  stroke-width: 2; stroke-linecap: round; pointer-events: none;
}
body[dir="rtl"] .search-wrap svg { left: auto; right: 0.9rem; }
.search-input {
  width: 100%; padding: 0.65rem 1rem 0.65rem 2.4rem;
  border: 1px solid var(--border);
  font-family: inherit; font-size: 0.88rem;
  background: var(--surface);
  color: var(--text-primary);
  transition: border-color 0.2s, box-shadow 0.2s;
}
body[dir="rtl"] .search-input { padding: 0.65rem 2.4rem 0.65rem 1rem; }
.search-input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-glow); }
.search-input::placeholder { color: var(--text-muted); }
.sort-select {
  padding: 0.65rem 2rem 0.65rem 1rem;
  border: 1px solid var(--border);
  font-family: inherit; font-size: 0.82rem;
  background: var(--surface); color: var(--text-primary);
  cursor: pointer; appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23888' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.7rem center;
  transition: border-color 0.2s;
}
body[dir="rtl"] .sort-select { padding: 0.65rem 1rem 0.65rem 2rem; background-position: left 0.7rem center; }
.sort-select:focus { outline: none; border-color: var(--accent); }
.no-results { grid-column: 1/-1; text-align: center; padding: 3rem 0; color: var(--text-muted); }
.no-results span { font-size: 2rem; display: block; margin-bottom: 0.8rem; }
.result-count { font-size: 0.78rem; color: var(--text-muted); margin-bottom: 1.2rem; margin-top: -1rem; }

/* ── WISHLIST HEART ON CARD ── */
.wish-btn {
  position: absolute; top: 0.6rem; right: 0.6rem;
  width: 32px; height: 32px;
  background: rgba(255,255,255,0.88); border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 1rem; z-index: 2; backdrop-filter: blur(4px);
}
[data-theme="dark"] .wish-btn { background: rgba(15,15,13,0.88); }
body[dir="rtl"] .wish-btn { right: auto; left: 0.6rem; }
.wish-btn:hover { transform: scale(1.15); background: white; }
[data-theme="dark"] .wish-btn:hover { background: #1c1c19; }
.wish-btn.wished { background: white; }
[data-theme="dark"] .wish-btn.wished { background: #1c1c19; }
.wish-btn.wished svg { fill: #e74c3c; stroke: #e74c3c; }
.wish-btn svg { width: 16px; height: 16px; fill: none; stroke: var(--text-muted); stroke-width: 2; }

/* ── MODAL ── */
.overlay {
  display: none; position: fixed; inset: 0; z-index: 200;
  background: var(--modal-overlay); backdrop-filter: blur(4px);
  align-items: center; justify-content: center; padding: 1rem;
}
.overlay.open { display: flex; }
.modal {
  background: var(--bg-panel); width: 100%; max-width: 900px;
  max-height: 92vh; overflow-y: auto;
  display: grid; grid-template-columns: 1fr 1fr;
  animation: slideUp 0.3s ease;
  border: 1px solid var(--border);
  box-shadow: var(--shadow-lg);
}
@keyframes slideUp {
  from { transform: translateY(30px); opacity: 0; }
  to   { transform: translateY(0);    opacity: 1; }
}
.modal-img-section { display: flex; flex-direction: column; background: var(--bg-secondary); }
.modal-img-main { flex: 1; overflow: hidden; position: relative; min-height: 320px; }
.modal-img-main img { width: 100%; height: 100%; object-fit: cover; transition: opacity 0.3s ease; }
.modal-img-main img.fade { opacity: 0; }
.modal-thumbnails {
  display: flex; gap: 0.5rem; padding: 0.75rem;
  overflow-x: auto; background: var(--surface-alt); scrollbar-width: thin;
}
.modal-thumb {
  width: 60px; height: 75px; flex-shrink: 0;
  overflow: hidden; cursor: pointer;
  border: 2px solid transparent;
  transition: border-color 0.2s, transform 0.15s;
  border-radius: 2px;
}
.modal-thumb:hover { transform: scale(1.05); }
.modal-thumb.active { border-color: var(--accent); }
.modal-thumb img { width: 100%; height: 100%; object-fit: cover; }
.modal-info { padding: 2.5rem 2rem; position: relative; overflow-y: auto; background: var(--bg-panel); }
.modal-close {
  position: absolute; top: 1rem; right: 1rem;
  font-size: 1.4rem; color: var(--text-muted);
  width: 36px; height: 36px;
  display: flex; align-items: center; justify-content: center;
  border-radius: 50%; transition: background 0.2s;
}
body[dir="rtl"] .modal-close { right: auto; left: 1rem; }
.modal-close:hover { background: var(--surface-alt); }
.modal-cat { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.12em; color: var(--accent); }
body[dir="rtl"] .modal-cat { letter-spacing: 0; }
.modal-name {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.9rem; font-weight: 400;
  margin: 0.3rem 0 0.8rem; line-height: 1.2; color: var(--text-primary);
}
body[dir="rtl"] .modal-name { font-family: 'Noto Kufi Arabic', sans-serif; font-size: 1.6rem; }
.modal-price { display: flex; gap: 0.8rem; align-items: center; margin-bottom: 1.2rem; }
.modal-price-now { font-size: 1.4rem; font-weight: 500; color: var(--text-primary); }
.modal-price-old { font-size: 1rem; text-decoration: line-through; color: var(--text-muted); }
.modal-discount {
  background: var(--accent); color: white;
  font-size: 0.72rem; font-weight: 700;
  padding: 0.2rem 0.5rem; letter-spacing: 0.06em;
}
body[dir="rtl"] .modal-discount { letter-spacing: 0; }
.modal-desc { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.7; margin-bottom: 1.4rem; }
.modal-stock { font-size: 0.82rem; margin-bottom: 1.2rem; font-weight: 500; }
.stock-ok   { color: var(--green); }
.stock-low  { color: var(--red); }
.stock-none { color: var(--text-muted); }

/* ── COLOR PALETTE ── */
.color-label {
  font-size: 0.78rem; text-transform: uppercase;
  letter-spacing: 0.08em; font-weight: 500;
  margin-bottom: 0.6rem; color: var(--text-primary);
  display: flex; align-items: center; gap: 0.5rem;
}
body[dir="rtl"] .color-label { letter-spacing: 0; }
.color-label .selected-color-name {
  color: var(--accent); font-weight: 600;
  letter-spacing: 0; text-transform: none; font-size: 0.82rem;
}
.color-palette { display: flex; gap: 0.6rem; flex-wrap: wrap; margin-bottom: 1.4rem; }
.color-swatch {
  width: 34px; height: 34px; border-radius: 50%;
  border: 2px solid rgba(0,0,0,0.12);
  cursor: pointer; position: relative;
  transition: transform 0.2s, box-shadow 0.2s;
  overflow: hidden;
}
[data-theme="dark"] .color-swatch { border-color: rgba(255,255,255,0.1); }
.color-swatch::after {
  content: '✓'; position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.8rem; font-weight: 700; color: white;
  text-shadow: 0 1px 3px rgba(0,0,0,0.5);
  opacity: 0; transition: opacity 0.15s;
}
.color-swatch:hover { transform: scale(1.15); box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
.color-swatch.active { border-color: var(--text-primary); box-shadow: 0 0 0 3px var(--text-primary); transform: scale(1.1); }
.color-swatch.active::after { opacity: 1; }

/* ── SIZES ── */
.size-label {
  font-size: 0.78rem; text-transform: uppercase;
  letter-spacing: 0.08em; font-weight: 500; margin-bottom: 0.6rem;
  color: var(--text-primary);
}
body[dir="rtl"] .size-label { letter-spacing: 0; }
.sizes { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1.5rem; }
.size-btn {
  width: 42px; height: 42px;
  border: 1px solid var(--border);
  font-size: 0.8rem; font-weight: 500; color: var(--text-primary);
  background: var(--surface);
  transition: all 0.15s; font-family: inherit;
}
.size-btn:hover { border-color: var(--text-primary); }
.size-btn.selected { background: var(--text-primary); color: var(--bg); border-color: var(--text-primary); }
.size-btn.no-stock { opacity: 0.35; cursor: not-allowed; text-decoration: line-through; }
.add-to-cart-btn {
  width: 100%; padding: 1rem;
  background: var(--text-primary); color: var(--bg);
  font-size: 0.82rem; letter-spacing: 0.12em; text-transform: uppercase; font-weight: 500;
  transition: background 0.2s; font-family: inherit;
}
body[dir="rtl"] .add-to-cart-btn { letter-spacing: 0; }
.add-to-cart-btn:hover:not(:disabled) { background: var(--accent); color: white; }
.add-to-cart-btn:disabled { background: var(--border); color: var(--text-muted); cursor: not-allowed; }

/* ── CART PANEL ── */
.cart-panel {
  position: fixed; right: 0; top: 0; bottom: 0;
  width: 420px; max-width: 100%;
  background: var(--bg-panel); z-index: 600;
  transform: translateX(100%);
  transition: transform 0.35s ease;
  display: flex; flex-direction: column;
  overflow: hidden; /* critical: allows flex children to control own scroll */
  box-shadow: var(--shadow-panel);
  border-left: 1px solid var(--border);
}
body[dir="rtl"] .cart-panel { right: auto; left: 0; transform: translateX(-100%); box-shadow: 4px 0 40px rgba(0,0,0,0.4); border-left: none; border-right: 1px solid var(--border); }
.cart-panel.open, body[dir="rtl"] .cart-panel.open { transform: translateX(0); }
.cart-overlay-bg { display: none; position: fixed; inset: 0; z-index: 590; background: var(--modal-overlay); backdrop-filter: blur(2px); }
.cart-overlay-bg.open { display: block; }
.cart-head {
  padding: 1.5rem 1.5rem 1rem;
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between;
}
.cart-head h2 { font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; font-weight: 400; color: var(--text-primary); }
body[dir="rtl"] .cart-head h2 { font-family: 'Noto Kufi Arabic', sans-serif; }
.cart-body {
  flex: 1;
  overflow-y: auto;
  min-height: 0; /* THE key fix: allows flex child to shrink below content size */
  padding: 1rem 1.5rem;
}
.cart-empty { text-align: center; padding: 3rem 0; color: var(--text-muted); }
.cart-empty .empty-icon { font-size: 3rem; margin-bottom: 1rem; }
.cart-item {
  display: grid; grid-template-columns: 70px 1fr auto;
  gap: 0.8rem; padding: 1rem 0;
  border-bottom: 1px solid var(--border);
  align-items: start;
}
.cart-item-img { width: 70px; height: 90px; object-fit: cover; background: var(--bg-secondary); }
.cart-item-info { font-size: 0.85rem; }
.cart-item-name { font-weight: 500; margin-bottom: 0.2rem; color: var(--text-primary); }
.cart-item-meta { color: var(--text-muted); font-size: 0.78rem; }
.cart-item-price { font-weight: 500; font-size: 0.9rem; color: var(--text-primary); }
.cart-item-remove { color: var(--text-muted); font-size: 0.75rem; margin-top: 0.4rem; text-decoration: underline; cursor: pointer; }
.cart-foot {
  flex-shrink: 0; /* never shrink — always visible at bottom */
  padding: 1.5rem;
  border-top: 1px solid var(--border);
  background: var(--bg-panel);
}
.cart-foot--hidden { display: none; }
.cart-total { display: flex; justify-content: space-between; font-size: 1.1rem; font-weight: 500; margin-bottom: 1.2rem; color: var(--text-primary); }
.checkout-btn {
  width: 100%; padding: 1rem;
  background: var(--text-primary); color: var(--bg);
  font-size: 0.82rem; letter-spacing: 0.12em; text-transform: uppercase; font-weight: 500;
  transition: background 0.2s; font-family: inherit;
}
body[dir="rtl"] .checkout-btn { letter-spacing: 0; }
.checkout-btn:hover { background: var(--accent); color: white; }

/* ── WISHLIST PANEL ── */
.wish-panel {
  position: fixed; right: 0; top: 0; bottom: 0;
  width: 420px; max-width: 100%;
  background: var(--bg-panel); z-index: 600;
  transform: translateX(100%);
  transition: transform 0.35s ease;
  display: flex; flex-direction: column;
  box-shadow: var(--shadow-panel);
  border-left: 1px solid var(--border);
}
body[dir="rtl"] .wish-panel { right: auto; left: 0; transform: translateX(-100%); box-shadow: 4px 0 30px rgba(0,0,0,0.12); border-left: none; border-right: 1px solid var(--border); }
.wish-panel.open, body[dir="rtl"] .wish-panel.open { transform: translateX(0); }
.wish-head {
  padding: 1.5rem 1.5rem 1rem;
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between;
}
.wish-head h2 { font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; font-weight: 400; color: var(--text-primary); }
body[dir="rtl"] .wish-head h2 { font-family: 'Noto Kufi Arabic', sans-serif; }
.wish-body { flex: 1; overflow-y: auto; padding: 1rem 1.5rem; }
.wish-empty { text-align: center; padding: 3rem 0; color: var(--text-muted); }
.wish-empty .empty-icon { font-size: 3rem; margin-bottom: 1rem; }
.wish-item {
  display: grid; grid-template-columns: 70px 1fr auto;
  gap: 0.8rem; padding: 1rem 0;
  border-bottom: 1px solid var(--border);
  align-items: center; cursor: pointer;
}
.wish-item:hover .wish-item-name { color: var(--accent); }
.wish-item-img { width: 70px; height: 90px; object-fit: cover; background: var(--bg-secondary); }
.wish-item-info { font-size: 0.85rem; }
.wish-item-name { font-weight: 500; margin-bottom: 0.2rem; transition: color 0.2s; color: var(--text-primary); }
.wish-item-price { color: var(--accent); font-weight: 500; font-size: 0.9rem; }
.wish-item-remove { color: var(--text-muted); font-size: 1.1rem; padding: 0.3rem; transition: color 0.2s; }
.wish-item-remove:hover { color: var(--red); }

/* ── WISHLIST ICON IN HEADER ── */
.wish-btn-header {
  position: relative; padding: 0.5rem; font-size: 1.2rem;
  transition: transform 0.2s; display: flex; align-items: center;
}
.wish-btn-header:hover { transform: scale(1.1); }
.wish-btn-header svg { width: 22px; height: 22px; fill: none; stroke: var(--text-primary); stroke-width: 2; transition: fill 0.2s, stroke 0.2s; }
.wish-btn-header.has-items svg { fill: #e74c3c; stroke: #e74c3c; }
.wish-count {
  position: absolute; top: 0; right: 0;
  background: #e74c3c; color: white;
  font-size: 0.65rem; font-weight: 700;
  width: 18px; height: 18px; border-radius: 50%;
  display: none; align-items: center; justify-content: center;
}

/* ── CHECKOUT ── */
.checkout-overlay {
  display: none; position: fixed; inset: 0; z-index: 400;
  background: var(--modal-overlay); backdrop-filter: blur(4px);
  align-items: center; justify-content: center; padding: 1rem;
}
.checkout-overlay.open { display: flex; }
.checkout-box {
  background: var(--bg-panel); width: 100%; max-width: 500px;
  padding: 2.5rem; max-height: 90vh; overflow-y: auto;
  animation: slideUp 0.3s ease;
  border: 1px solid var(--border);
  box-shadow: var(--shadow-lg);
}
.checkout-box h2 { font-family: 'Cormorant Garamond', serif; font-size: 2rem; font-weight: 400; margin-bottom: 0.5rem; color: var(--text-primary); }
body[dir="rtl"] .checkout-box h2 { font-family: 'Noto Kufi Arabic', sans-serif; font-size: 1.7rem; }
.checkout-box p { color: var(--text-muted); font-size: 0.85rem; margin-bottom: 2rem; }
.form-group { margin-bottom: 1.2rem; }
.form-group label {
  display: block; font-size: 0.78rem; text-transform: uppercase;
  letter-spacing: 0.08em; font-weight: 500; margin-bottom: 0.5rem; color: var(--text-primary);
}
body[dir="rtl"] .form-group label { letter-spacing: 0; }
.form-group input, .form-group textarea {
  width: 100%; padding: 0.75rem 1rem;
  border: 1px solid var(--border);
  font-family: inherit; font-size: 0.9rem;
  transition: border-color 0.2s; resize: none;
  background: var(--surface); color: var(--text-primary);
}
.form-group input:focus, .form-group textarea:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-glow); }
.order-summary { background: var(--bg-secondary); padding: 1.2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
.order-summary h3 { font-size: 0.78rem; text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.8rem; color: var(--text-primary); }
body[dir="rtl"] .order-summary h3 { letter-spacing: 0; }
.order-summary-item { display: flex; justify-content: space-between; font-size: 0.83rem; padding: 0.25rem 0; color: var(--text-secondary); }
.order-summary-total {
  display: flex; justify-content: space-between; font-weight: 600;
  padding-top: 0.6rem; border-top: 1px solid var(--border); margin-top: 0.6rem;
  color: var(--text-primary);
}
.place-order-btn {
  width: 100%; padding: 1rem;
  background: var(--accent); color: white;
  font-size: 0.82rem; letter-spacing: 0.12em; text-transform: uppercase; font-weight: 500;
  transition: background 0.2s; margin-bottom: 0.8rem; font-family: inherit;
}
body[dir="rtl"] .place-order-btn { letter-spacing: 0; }
.place-order-btn:hover:not(:disabled) { background: var(--accent-dark); }
.place-order-btn:disabled { background: var(--border); color: var(--text-muted); cursor: not-allowed; }
.cancel-btn {
  width: 100%; padding: 0.8rem;
  border: 1px solid var(--border);
  font-size: 0.78rem; letter-spacing: 0.1em; text-transform: uppercase;
  transition: all 0.2s; font-family: inherit; color: var(--text-primary);
  background: transparent;
}
body[dir="rtl"] .cancel-btn { letter-spacing: 0; }
.cancel-btn:hover { background: var(--surface-alt); }
.success-screen { text-align: center; padding: 1rem 0; }
.success-icon { font-size: 3.5rem; margin-bottom: 1rem; }
.success-screen h2 { font-family: 'Cormorant Garamond', serif; font-size: 2rem; margin-bottom: 0.5rem; color: var(--text-primary); }
body[dir="rtl"] .success-screen h2 { font-family: 'Noto Kufi Arabic', sans-serif; }
.success-screen p { color: var(--text-muted); line-height: 1.7; }

/* ── TOAST ── */
.toast-container {
  position: fixed; bottom: 1.5rem; left: 50%; transform: translateX(-50%);
  z-index: 9999; display: flex; flex-direction: column; gap: 0.5rem; align-items: center;
}
.toast {
  background: var(--text-primary); color: var(--bg);
  padding: 0.7rem 1.4rem; font-size: 0.82rem;
  border-radius: 2rem; letter-spacing: 0.04em;
  animation: toastIn 0.3s ease, toastOut 0.3s ease 2.2s forwards;
  white-space: nowrap;
  box-shadow: var(--shadow-md);
}
.toast.green { background: var(--green); color: white; }
.toast.red   { background: var(--red);   color: white; }
@keyframes toastIn  { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes toastOut { from { opacity: 1; } to { opacity: 0; } }

/* ── FOOTER ── */
footer {
  background: var(--bg-hero-start);
  color: var(--text-muted);
  padding: 3rem 2rem 2rem; margin-top: 4rem;
  border-top: 1px solid var(--border);
}
.footer-inner {
  max-width: 1200px; margin: 0 auto;
  display: flex; flex-direction: column; align-items: center; gap: 1.5rem;
}
.footer-logo { font-family: 'Cormorant Garamond', serif; font-size: 2rem; font-weight: 600; letter-spacing: 0.15em; color: var(--text-inverse); }
[data-theme="dark"] .footer-logo { color: var(--text-primary); }
.footer-logo span { color: var(--accent); }
.footer-tagline { font-size: 0.8rem; letter-spacing: 0.08em; color: #666; text-transform: uppercase; }
body[dir="rtl"] .footer-tagline { letter-spacing: 0; }
.social-links { display: flex; gap: 1.2rem; align-items: center; }
.social-link {
  display: flex; align-items: center; justify-content: center;
  width: 44px; height: 44px;
  border: 1px solid #333; border-radius: 50%; color: #888;
  transition: all 0.3s ease;
}
[data-theme="dark"] .social-link { border-color: var(--border); color: var(--text-muted); }
.social-link:hover { border-color: var(--accent); color: var(--accent); transform: translateY(-3px); background: rgba(201,169,110,0.08); }
.social-link svg { width: 18px; height: 18px; fill: currentColor; }
.footer-divider { width: 100%; border: none; border-top: 1px solid #1f1f1f; }
[data-theme="dark"] .footer-divider { border-color: var(--border); }
.footer-bottom { text-align: center; font-size: 0.78rem; color: #555; letter-spacing: 0.05em; }
.footer-bottom strong { color: var(--accent); }

/* ── SCROLLBAR (dark mode) ── */
[data-theme="dark"] ::-webkit-scrollbar { width: 6px; }
[data-theme="dark"] ::-webkit-scrollbar-track { background: var(--bg); }
[data-theme="dark"] ::-webkit-scrollbar-thumb { background: var(--border-strong); border-radius: 3px; }
[data-theme="dark"] ::-webkit-scrollbar-thumb:hover { background: var(--accent); }

/* ── RESPONSIVE ── */
@media (max-width: 700px) {
  nav { display: none; }
  .modal { grid-template-columns: 1fr; }
  .modal-img-section { min-height: 280px; }
  header { padding: 0 1rem; }
  #shop { padding: 2rem 1rem; }
}

/* ── MOBILE CART — Checkout always visible ── */
@media (max-width: 768px) {
  body { padding-bottom: 64px; }

  /* Full-width panel on mobile */
  .cart-panel, .wish-panel { width: 100%; }

  /* cart-body already has min-height:0 + flex:1 — scrolls correctly */
  .cart-body { padding: 0.75rem 1rem; }

  /* Footer: flex-shrink:0 already set globally — just style it for mobile */
  .cart-foot {
    padding: 1rem 1rem 1.2rem;
    border-top: 2px solid var(--border);
    box-shadow: 0 -6px 20px rgba(0,0,0,0.12);
  }
  [data-theme="dark"] .cart-foot {
    box-shadow: 0 -6px 24px rgba(0,0,0,0.45);
  }
  .cart-total { font-size: 1rem; margin-bottom: 0.85rem; }

  /* Gold checkout button — impossible to miss */
  .checkout-btn {
    padding: 1rem;
    font-size: 0.9rem;
    background: var(--accent) !important;
    color: #fff !important;
    letter-spacing: 0.08em;
  }
  .checkout-btn:hover, .checkout-btn:active {
    filter: brightness(1.1);
  }

  .whatsapp-float { bottom: 76px; }
  .bottom-nav { display: flex; }
}

/* ── BOTTOM NAVIGATION BAR (mobile only) ── */
.bottom-nav {
  display: none;
  position: fixed;
  bottom: 0; left: 0; right: 0;
  z-index: 500;
  background: var(--header-bg);
  border-top: 1px solid var(--border);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  height: 60px;
  align-items: stretch;
}
.bn-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  color: var(--text-muted);
  font-size: 0.56rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-weight: 500;
  border: none;
  background: none;
  font-family: inherit;
  cursor: pointer;
  transition: color 0.18s;
  position: relative;
  padding: 0;
}
.bn-item.active, .bn-item:hover { color: var(--accent); }
.bn-item svg {
  width: 22px; height: 22px;
  stroke: currentColor; fill: none;
  stroke-width: 1.8;
  stroke-linecap: round; stroke-linejoin: round;
  transition: transform 0.18s;
}
.bn-item:active svg { transform: scale(0.88); }
.bn-badge {
  position: absolute;
  top: 6px; right: calc(50% - 19px);
  background: var(--accent); color: white;
  font-size: 0.52rem; font-weight: 700;
  min-width: 15px; height: 15px;
  border-radius: 8px; padding: 0 3px;
  display: none; align-items: center; justify-content: center;
}
.bn-badge.show { display: flex; }

/* ── SCROLL PROGRESS BAR ── */
#scroll-progress {
  position: fixed;
  top: 0; left: 0;
  height: 2.5px;
  width: 0%;
  background: linear-gradient(90deg, var(--accent) 0%, #f0d080 100%);
  z-index: 9999;
  transition: width 0.06s linear;
  pointer-events: none;
}

/* ── BACK TO TOP ── */
#back-to-top {
  position: fixed;
  bottom: 28px; left: 28px;
  z-index: 400;
  width: 42px; height: 42px;
  border-radius: 50%;
  background: var(--text-primary);
  color: var(--bg);
  border: none; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  box-shadow: var(--shadow-md);
  opacity: 0;
  transform: translateY(14px);
  transition: opacity 0.25s, transform 0.25s, background 0.2s;
  pointer-events: none;
}
#back-to-top.visible { opacity: 1; transform: translateY(0); pointer-events: auto; }
#back-to-top:hover { background: var(--accent); }
#back-to-top svg {
  width: 17px; height: 17px;
  stroke: currentColor; fill: none;
  stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round;
}
[dir="rtl"] #back-to-top { left: auto; right: 28px; }
@media (max-width: 768px) {
  #back-to-top { bottom: 72px; left: 14px; }
  [dir="rtl"] #back-to-top { right: 14px; left: auto; }
}

/* ── CATEGORY BREADCRUMB ── */
#category-breadcrumb {
  display: none;
  align-items: center;
  gap: 0.4rem;
  font-size: 0.74rem;
  color: var(--text-muted);
  margin-bottom: 1rem;
  animation: bcSlideIn 0.22s ease;
}
#category-breadcrumb.visible { display: flex; }
.bc-sep { opacity: 0.45; font-size: 0.9rem; }
.bc-active {
  color: var(--accent);
  font-weight: 600;
}
.bc-clear {
  width: 17px; height: 17px;
  border-radius: 50%;
  background: var(--border);
  border: none; cursor: pointer;
  font-family: inherit;
  color: var(--text-muted);
  font-size: 0.65rem;
  display: flex; align-items: center; justify-content: center;
  margin-left: 0.15rem;
  transition: background 0.15s, color 0.15s;
}
.bc-clear:hover { background: var(--text-primary); color: var(--bg); }
@keyframes bcSlideIn {
  from { opacity: 0; transform: translateX(-5px); }
  to   { opacity: 1; transform: translateX(0); }
}
[dir="rtl"] #category-breadcrumb { animation-name: bcSlideInRtl; }
@keyframes bcSlideInRtl {
  from { opacity: 0; transform: translateX(5px); }
  to   { opacity: 1; transform: translateX(0); }
}

/* ── BLUR-UP IMAGE PLACEHOLDER ── */
.card-img-primary {
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  opacity: 1;
  transition: opacity 0.42s ease;
  z-index: 1;
}
.card-img-secondary {
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  opacity: 0;
  transition: opacity 0.42s ease;
  z-index: 2;
  pointer-events: none;
}
.product-card:hover .card-img-secondary { opacity: 1; }
.product-card:hover .card-img-primary   { opacity: 0; }

/* ── QUICK-ADD SIZE PANEL ── */
.quick-add {
  position: absolute; bottom: 0; left: 0; right: 0;
  z-index: 10;
  background: rgba(255,255,255,0.97);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  padding: 0.6rem 0.75rem 0.75rem;
  transform: translateY(100%);
  transition: transform 0.26s cubic-bezier(0.34,1.15,0.64,1);
  border-top: 1px solid var(--border);
}
[data-theme="dark"] .quick-add { background: rgba(18,18,15,0.97); }
.product-card:hover .quick-add { transform: translateY(0); }
.qa-label {
  font-size: 0.6rem; text-transform: uppercase;
  letter-spacing: 0.1em; color: var(--text-muted);
  font-weight: 600; margin-bottom: 0.4rem;
}
body[dir="rtl"] .qa-label { letter-spacing: 0; }
.qa-sizes { display: flex; gap: 0.28rem; flex-wrap: wrap; }
.qa-size {
  font-size: 0.68rem; font-weight: 600;
  padding: 0.25rem 0.5rem;
  border: 1.5px solid var(--border);
  background: var(--surface); color: var(--text-primary);
  cursor: pointer; font-family: inherit;
  transition: background 0.15s, border-color 0.15s, color 0.15s, transform 0.1s;
}
.qa-size:hover:not(:disabled) {
  background: var(--text-primary); color: var(--bg);
  border-color: var(--text-primary); transform: scale(1.07);
}
.qa-size--out { opacity: 0.32; text-decoration: line-through; cursor: not-allowed; }
@keyframes cardFlash {
  0%,100% { box-shadow: none; }
  50% { box-shadow: 0 0 0 6px rgba(201,169,110,0.28); }
}
.product-card.card-added { animation: cardFlash 0.55s ease; }

/* ── CARD URGENCY BAR ── */
.card-urgency {
  padding: 0.42rem 0 0;
  display: flex; align-items: center; gap: 0.45rem;
}
.urgency-bar { flex: 1; height: 3px; background: var(--light-gray); border-radius: 2px; overflow: hidden; }
.urgency-fill { height: 100%; background: var(--red); border-radius: 2px; }
.urgency-text { font-size: 0.66rem; color: var(--red); font-weight: 600; white-space: nowrap; }

/* ── SWIPEABLE CATEGORY PILLS (mobile) ── */
@media (max-width: 700px) {
  .categories {
    flex-wrap: nowrap !important;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x proximity;
    gap: 0.45rem;
    padding-bottom: 4px;
    scrollbar-width: none;
  }
  .categories::-webkit-scrollbar { display: none; }
  .cat-pill { flex-shrink: 0; scroll-snap-align: start; }
}

/* ── SHARE BUTTON IN MODAL ── */
.modal-share-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.72rem;
  font-family: inherit;
  color: var(--text-muted);
  background: none;
  border: 1px solid var(--border);
  padding: 0.35rem 0.75rem;
  cursor: pointer;
  transition: border-color 0.18s, color 0.18s, background 0.18s;
  margin-top: 0.75rem;
  border-radius: 0;
}
.modal-share-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: var(--accent-glow);
}
.modal-share-btn svg {
  width: 14px; height: 14px;
  stroke: currentColor; fill: none;
  stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
}